# 一.Linux基础与常用命令

## Linux 目录结构

| 目录名 | 目录的作用                                                   |
| ------ | ------------------------------------------------------------ |
| /bin/  | 存放系统命令的目录,普通用户和超级用户都可以执行              |
| /sbin/ | 存放系统命令的目录，只有超级用户才可以执行                   |
| /sbin/ | 存放系统命令的目录，只有超级用户才可以执行                   |
| /boot/ | 系统启动目录，保存了与系统启动相关的文件                     |
| /dev/  | 设备文件保存位置                                             |
| /etc/  | 配置文件保存位置。/etc/shells 保存了本机支持的shell          |
| /mnt/  | 挂载目录                                                     |
| /proc/ | 虚拟文件系统，该目录中的数据并不保存在硬盘上，而是保存到内存中。主要保存系统的内核，进程，外部设备状态和网络状态等 |

## 常用命令

1. stat 查看文件详细信息如：大小，块，权限，访问时间，修改时间，创建时间等

2. head ：显示文件开头的命令

   * -n 行数：从文件头开始，显示指定的行数

3. tail ：显示文件结尾的命令

   - -n 行数：从文件尾开始，显示指定的行数
   - -f ：显示文件新增的内容

4. ln命令：在文件之间建立链接

   - -s ： 建立软链接文件，若不指定则建立硬链接文件。
   - -f ： 强制。如果目标文件已经存在，则删除文件再重新建立链接文件。
   - 软链接类似于快捷方式，硬链接是同一个文件的另一个名称。

5. find：在系统中搜索符合添加的文件名，用法：**find 目录 选项 [-exec/-ok] command {} ;**

   1. -exec execute执行，直接执行后面的command，不用询问是否执行

   2. -ok 执行后面的command会询问Y/N

   3. {} 表示要执行的命令的参数即为找到的文件，命令末尾必须以 ; 结尾分号不能少

   4. -name 按照文件名称查找

   5. -perm 按照权限查找：-perm 755

   6. -prune 使用此选项可以使find命令不在当前指定的目录中查找】

   7. -type 查找某一类型的文件

      ```markdown
       1. type的选项
       2. b 块设备文件
       3. d 目录
       4. c 字符设备文件
       5. f 普通文件
       6. p 管道文件
       7. l 符号链接文件	
      ```

6. ifconfig命令查看IP地址的信息。

7. netstat命令查看网络状态，既可以看到本机开启的端口，也可以看到有哪些客户端在进行连接。**netstat [选项]**

   - -a :列出所有网络状态，包括socket程序
   - -c :秒数：指定每隔几秒刷一次网络状态
   - -t :显示使用TCP协议端口的连接状况。
   - -u :显示使用UDP协议端口的连接状况。
   - -l :仅显示处于监听状态的连接。
   - -r :显示路由表。
   - -p :显示PID和程序名。
   - -n :使用IP和端口显示，不使用域名与服务名。

# 二. Shell的定义

## shell 定义	

1. shell是一个命令行解释器，它为用户提供了一个向Linux内核发送请求以便运行程序的界面系统级程序，用户可以用shell来启动、挂起、停止甚至是编写一些程序。

​	2 .shell还是一个功能相当强大的编程语言，易编写，易调试，灵活性较强。shell是解释执行的脚本语言，在shell中可以直接条用Linux系统命令。

![image-20211212192215354](F:\software\typora\Typora_pictures\image-20211212192215354.png)	

# 三.Shell基础知识

## 1.shell脚本执行方式

### echo命令

```bash
echo [选项] [输出内容]
选项：
	-e：支持反斜线控制的字符转换
	-n：取消输出后行末的换行符号（就是内容输出后不换行）
```

### shell脚本的执行

 1.source

```shell
#!/bin/bash
#---------------
#@file:second.sh
#---------------
echo 'your are in second file'
source first.sh
```

2.点号.

```shell
#!/bin/bash
echo 'your are in second file'
. first.sh
```

注意，点号与脚本文件之间记得要有空格。

3.sh命令

```shell
#!/bin/bash
echo 'your are in second file'
sh  first.sh2.shell脚本执行方式
```

## 2.常用命令

```shell
    1、shutdown –r now：现在重新启动计算机
    2、reboot：现在重新启动计算机
    3、su -：切换用户；passwd：修改用户密码
    4、logout：用户注销
```

```shell
   1.ls命令是列出目录内容的意思（List Directtory Contents）。运行它就是列出文件夹的内容，可能是文件也可能是文件夹。
    ls -l命令以详情模式(long listing fashion)列出文件夹的内容。
    ls -a命令会列出文件夹里的所有内容，包括以"."开头的隐藏文件。
  	注意：在Linux中，文件以“.”开头就是隐藏文件，并且每个文件，文件夹，设备或者命令都是以文件对待
   2.history
    “history” 命令就是历史记录。它显示了在终端中所执行过的所有命令的历史。
   3.sudo
    “sudo”(super userdo)命令允许授权用户执行超级用户或者其它用户的命令。通过在sudoers列表的安全策略来指定。
    注意：sudo允许用户借用超级用户的权限，然而"su"命令实际上是允许用户以超级用户登录。所以sudo比su更安全。
    并不建议使用sudo或者su来处理日常用途，因为它可能导致严重的错误如果你意外的做错了事。
   4.chmod
    “chmod”命令就是改变文件的模式位。chmod会根据要求的模式来改变每个所给的文件，文件夹，脚本等等的文件模式（权限）。
   5.chown
    “chown”命令就是改变文件拥有者和所在用户组。每个文件都属于一个用户组和一个用户。在你的目录下，使用"ls -l",你就会看到像这样的东西。
   6.apt
    Debian系列以“apt”命令为基础，“apt”代表了Advanced Package Tool。APT是一个为Debian系列系统（Ubuntu，Kubuntu等等）开发的高级包管理器，在		Gnu/Linux系统上，它会为包自动地，智能地搜索，安装，升级以及解决依赖。例如：apt-get install mplayer
   7.cal
    “cal”（Calender），它用来显示当前月份或者未来或者过去任何年份中的月份。
   8.date
    “date”命令使用标准的输出打印当前的日期和时间，也可以深入设置。
```

## 3.输入输出重定向

#### 1.标准输入输出

| 设备   | 设备文件名  | 文件描述符 | 类型         |
| ------ | ----------- | ---------- | ------------ |
| 键盘   | /dev/stdin  | 0          | 标准输入     |
| 显示器 | /dev/stdout | 1          | 标准输出     |
| 显示器 | /dev/stderr | 2          | 标准错误输出 |

#### 2.输出重定向

| 类型                       | 符号                           | 作用                                                     |
| -------------------------- | ------------------------------ | -------------------------------------------------------- |
| 标准输出重定向             | 命令>文件                      | 以覆盖的方式，把命令的正确输出输出到指定的文件或设备中   |
| 标准输出重定向             | 命令>>文件                     | 以追加的方式，把命令的正确输出输出到指定的文件或设备中   |
| 标准错误输出重定向         | 错误命令 2>文件                | 以覆盖的方式，把命令的错误输出输出到指定的文件或设备中   |
| 标准错误输出重定向         | 错误命令 2>>文件               | 以追加的方式，把命令的错误输出输出到指定的文件或设备中   |
| 正确输出和错误输出同时保存 | 命令>文件 2&1                  | 以覆盖的方式，把正确输出和错误输出都保存到同一个文件当中 |
| 正确输出和错误输出同时保存 | **命令>>文件 2&1**             | 以追加的方式，把正确输出和错误输出都保存到同一个文件当中 |
| 正确输出和错误输出同时保存 | 命令 &> 文件                   | 以覆盖的方式，把正确输出和错误输出都保存到同一个文件当中 |
| 正确输出和错误输出同时保存 | **命令 &>> 文件**              | 以追加的方式，把正确输出和错误输出都保存到同一个文件当中 |
| 正确输出和错误输出同时保存 | **命令 >> 文件 1 2 >> 文件 2** | 把正确的输出追加到文件1中，把错误的输出追加到文件2中     |

## 4.历史命令的调用

如果想要使用原先的历史命令有这样几种方法：

- 使用上、下箭头调用以前的历史命令
- 使用 “!n”重复执行第n条历史命令
- 使用 “!!”重复执行上一条命令
- 使用“!字串” 重复执行最后一条以该字串开头的命令
- 使用“!$”重复上一条命令的最后一个参数

## 5.变量

1. 在 shell 里，使用变量之前通常并不需要事先为他们做出声明，需要使用的时候直接创建就行了。**默认情况下，所有变量都被看做字符串并以字符串来存储，即使它们被赋值为数值时也是如此**。shell 和一些工具会在需要时把数值型字符串转换成对应的数值以对它们进行操作。

2. **变量的类型**

   shell 中有四种类型的变量：用户自定义变量、环境变量、位置参数变量和预定义变量。

   **1） 用户自定义变量** 

   　　用户自定义变量只会在当前 shell 中生效，也就是“局部变量”，只能在变量所在的那个 shell 脚本中生效。用户自定义变量一般用小写字母来命名。

   **2） 环境变量**

   　　当一个 shell 脚本程序开始执行时，一些变量会根据环境设置中的值进行初始化，这些变量通常用大写字母做名字，以便与用户自定义变量做区分，被称为环境变量。环境变量可以在当前 shell 和这个 shell 的所有子 shell 中生效。如果把环境变量写入相应的配置文件（如 /etc/profile ），那么这个环境变量就会在所有的 shell 中生效。系统自带的环境变量的名字不可更改，但是值可以按需更改。用户也可以使用 export 命令在 shell 中自己创建环境变量：

   ```
   export 变量名=变量值       # 创建环境变量并赋值
   ```

   　　一些主要的系统环境变量如下：

   | 环境变量 | 描述                                                         |
   | -------- | ------------------------------------------------------------ |
   | $HOME    | 当前用户的家目录                                             |
   | $PATH    | 以冒号分隔的用来搜索命令的目录列表，决定了 shell 将到哪些目录中去寻找命令或程序 |
   | $PS1     | 命令提示符，通常是 $ 字符，也可以自行设置                    |
   | $PS2     | 二级提示符，用来提示后续的输入，通常是 > 字符                |
   | $IFS     | 输入域分隔符。当 shell 读取输入时，它给出用来分隔单词的一组字符，通常是空格、制表符和换行符 |
   | $0       | shell 脚本的名字                                             |
   | $#       | 传递给脚本的参数个数                                         |
   | $$       | shell 脚本的进程号（PID），脚本程序通常会用它来生成一个唯一的临时文件，如 /tmp/tmpfile_$$ |

   **3） 位置参数变量**

   　位置参数变量主要用来向脚本中传递参数或数据，变量名不能自定义，变量作用也是固定的。主要有以下几种位置参数变量：

   | 位置参数变量 | 描述                                                         |
   | ------------ | :----------------------------------------------------------- |
   | $1、$2、...  | 脚本程序的参数，分别代表程序的第1个参数、第2个参数、... 程序第10个以上的参数需要用大括号包含，如 ${10} |
   | $*           | 代表命令行中的所有参数。在一个变量中将所有参数列出，各参数之间用环境变量 IFS 中的第一个字符分隔开 |
   | $@           | 和 $* 一样，也包含了命令行中的所有参数，但是不使用 IFS 环境变量，即使 IFS 为空，参数也是分开显示的 |

## 6.运算符

###  1.算术运算符

下表列出了常用的算术运算符，假定变量 a 为 10，变量 b 为 20：

| 运算符 | 说明                                          | 举例                          |
| :----- | :-------------------------------------------- | :---------------------------- |
| +      | 加法                                          | `expr $a + $b` 结果为 30。    |
| -      | 减法                                          | `expr $a - $b` 结果为 -10。   |
| *      | 乘法                                          | `expr $a \* $b` 结果为  200。 |
| /      | 除法                                          | `expr $b / $a` 结果为 2。     |
| %      | 取余                                          | `expr $b % $a` 结果为 0。     |
| =      | 赋值                                          | a=$b 把变量 b 的值赋给 a。    |
| ==     | 相等。用于比较两个数字，相同则返回 true。     | [ $a == $b ] 返回 false。     |
| !=     | 不相等。用于比较两个数字，不相同则返回 true。 | [ $a != $b ] 返回 true。      |

**注意：**条件表达式要放在方括号之间，并且要有空格，例如: **[$a==$b]** 是错误的，必须写成 **[ $a == $b ]**。

###  2.关系运算符

关系运算符只支持数字，不支持字符串，除非字符串的值是数字。

下表列出了常用的关系运算符，假定变量 a 为 10，变量 b 为 20：

| 运算符 | 说明                                                  | 举例                       |
| :----- | :---------------------------------------------------- | :------------------------- |
| -eq    | 检测两个数是否相等，相等返回 true。                   | [ $a -eq $b ] 返回 false。 |
| -ne    | 检测两个数是否不相等，不相等返回 true。               | [ $a -ne $b ] 返回 true。  |
| -gt    | 检测左边的数是否大于右边的，如果是，则返回 true。     | [ $a -gt $b ] 返回 false。 |
| -lt    | 检测左边的数是否小于右边的，如果是，则返回 true。     | [ $a -lt $b ] 返回 true。  |
| -ge    | 检测左边的数是否大于等于右边的，如果是，则返回 true。 | [ $a -ge $b ] 返回 false。 |
| -le    | 检测左边的数是否小于等于右边的，如果是，则返回 true。 | [ $a -le $b ] 返回 true。  |

### 3.布尔运算符

下表列出了常用的布尔运算符，假定变量 a 为 10，变量 b 为 20：

| 运算符 | 说明                                                | 举例                                       |
| :----- | :-------------------------------------------------- | :----------------------------------------- |
| !      | 非运算，表达式为 true 则返回 false，否则返回 true。 | [ ! false ] 返回 true。                    |
| -o     | 或运算，有一个表达式为 true 则返回 true。           | [ $a -lt 20 -o $b -gt 100 ] 返回 true。    |
| -a     | 与运算，两个表达式都为 true 才返回 true。           | [ $a -lt 20 -a $b -gt 100 ] 返回 false。   |
| &&     | 逻辑的 AND                                          | [[ $a -lt 100 && $b -gt 100 ]] 返回 false  |
| \|\|   | 逻辑的 OR                                           | [[ $a -lt 100 \|\| $b -gt 100 ]] 返回 true |

### 4. 字符串运算符

下表列出了常用的字符串运算符，假定变量 a 为 "abc"，变量 b 为 "efg"：

| 运算符 | 说明                                         | 举例                     |
| :----- | :------------------------------------------- | :----------------------- |
| =      | 检测两个字符串是否相等，相等返回 true。      | [ $a = $b ] 返回 false。 |
| !=     | 检测两个字符串是否不相等，不相等返回 true。  | [ $a != $b ] 返回 true。 |
| -z     | 检测字符串长度是否为0，为0返回 true。        | [ -z $a ] 返回 false。   |
| -n     | 检测字符串长度是否不为 0，不为 0 返回 true。 | [ -n "$a" ] 返回 true。  |
| $      | 检测字符串是否为空，不为空返回 true。        | [ $a ] 返回 true。       |

### 5.文件测试运算符

文件测试运算符用于检测 Unix 文件的各种属性。

属性检测描述如下：

| 操作符  | 说明                                                         | 举例                      |
| :------ | :----------------------------------------------------------- | :------------------------ |
| -b file | 检测文件是否是块设备文件，如果是，则返回 true。              | [ -b $file ] 返回 false。 |
| -c file | 检测文件是否是字符设备文件，如果是，则返回 true。            | [ -c $file ] 返回 false。 |
| -d file | 检测文件是否是目录，如果是，则返回 true。                    | [ -d $file ] 返回 false。 |
| -f file | 检测文件是否是普通文件（既不是目录，也不是设备文件），如果是，则返回 true。 | [ -f $file ] 返回 true。  |
| -g file | 检测文件是否设置了 SGID 位，如果是，则返回 true。            | [ -g $file ] 返回 false。 |
| -k file | 检测文件是否设置了粘着位(Sticky Bit)，如果是，则返回 true。  | [ -k $file ] 返回 false。 |
| -p file | 检测文件是否是有名管道，如果是，则返回 true。                | [ -p $file ] 返回 false。 |
| -u file | 检测文件是否设置了 SUID 位，如果是，则返回 true。            | [ -u $file ] 返回 false。 |
| -r file | 检测文件是否可读，如果是，则返回 true。                      | [ -r $file ] 返回 true。  |
| -w file | 检测文件是否可写，如果是，则返回 true。                      | [ -w $file ] 返回 true。  |
| -x file | 检测文件是否可执行，如果是，则返回 true。                    | [ -x $file ] 返回 true。  |
| -s file | 检测文件是否为空（文件大小是否大于0），不为空返回 true。     | [ -s $file ] 返回 true。  |
| -e file | 检测文件（包括目录）是否存在，如果是，则返回 true。          | [ -e $file ] 返回 true。  |

## 7.流程控制

if else-if else 语法格式：

```shell
if condition1
then
    command1
elif condition2 
then 
    command2
else
    commandN
fi
```

for循环一般格式为：

```shell
for var in item1 item2 ... itemN
do
    command1
    command2
    ...
    commandN
done
```